import discord
from discord.ext import commands
import random

# Intents para poder leer mensajes
intents = discord.Intents.default()
intents.message_content = True


bot = commands.Bot(command_prefix='$', intents=intents)

eco_tips = [
    "Reduce el uso de plÃ¡sticos de un solo uso.",
    "Recicla papel, vidrio, plÃ¡stico y metales.",
    "Camina o usa bicicleta en lugar del carro.",
    "Ahorra energÃ­a apagando luces innecesarias.",
    "Planta un Ã¡rbol para mejorar la calidad del aire."
]

pollution_causes = [
    "Quema de combustibles fÃ³siles.",
    "Uso excesivo de vehÃ­culos.",
    "FÃ¡bricas que emiten gases tÃ³xicos.",
    "DeforestaciÃ³n masiva.",
    "Manejo inadecuado de residuos."
]

eco_facts = [
    "â™»ï¸ El reciclaje de una lata de aluminio ahorra energÃ­a para 3 horas de TV.",
    "ğŸŒ³ Un Ã¡rbol adulto puede absorber hasta 21 kg de COâ‚‚ al aÃ±o.",
    "ğŸš¿ Ahorrar agua tambiÃ©n ayuda a reducir el uso de energÃ­a.",
    "ğŸ”¥ La contaminaciÃ³n del aire mata a mÃ¡s de 7 millones de personas cada aÃ±o.",
    "ğŸ¢ MÃ¡s de 100,000 animales marinos mueren al aÃ±o por plÃ¡sticos."
]

recycling_tips = {
    "papel": "ğŸ“„ Quita grapas y clips antes de reciclar papel.",
    "plÃ¡stico": "ğŸ§´ Enjuaga los envases plÃ¡sticos antes de reciclarlos.",
    "vidrio": "ğŸ¾ No mezcles vidrio roto con vidrio entero.",
    "metal": "ğŸ¥« Latas de aluminio y acero pueden reciclarse si estÃ¡n limpias.",
    "ropa": "ğŸ‘• Dona o reutiliza ropa en lugar de tirarla."
}

actions = [
    "ğŸ’§ Cierra el grifo mientras te cepillas los dientes.",
    "ğŸŒ Usa luz natural durante el dÃ­a.",
    "ğŸ›ï¸ Lleva tus propias bolsas al supermercado.",
    "ğŸ”Œ Desconecta cargadores que no estÃ©s usando.",
    "ğŸŒ¿ Planta una planta en casa o escuela."
]

@bot.event
async def on_ready():
    print(f"âœ… Bot conectado como {bot.user}")

@bot.command()
async def start(ctx):
    await ctx.send("ğŸŒ± Â¡Hola! Soy un bot ecolÃ³gico. Usa `/help` para ver los comandos disponibles.")

@bot.command()
async def tip(ctx):
    await ctx.send(f"ğŸ’¡ Tip ecolÃ³gico: {random.choice(eco_tips)}")

@bot.command()
async def causes(ctx):
    await ctx.send("ğŸŒ Causas de la contaminaciÃ³n:\n- " + "\n- ".join(pollution_causes))

@bot.command()
async def facts(ctx):
    await ctx.send(random.choice(eco_facts))

@bot.command()
async def recycle(ctx, material: str = None):
    if not material:
        await ctx.send("â™»ï¸ Usa `/recycle [material]` (papel, plÃ¡stico, vidrio, metal, ropa).")
        return
    tip = recycling_tips.get(material.lower())
    if tip:
        await ctx.send(tip)
    else:
        await ctx.send("âŒ Material no vÃ¡lido. Por favor usa: papel, plÃ¡stico,")

@bot.command()
async def actions(ctx):
    await ctx.send(f"ğŸŒ AcciÃ³n ecolÃ³gica: {random.choice(actions)}")

@bot.command()
async def quiz(ctx):
    questions = [
        {
            "q": "Â¿QuÃ© tarda mÃ¡s en degradarse?",
            "options": ["A) Papel", "B) Vidrio", "C) PlÃ¡stico", "D) Fruta"],
            "answer": "B"
        },
        {
            "q": "Â¿CÃ³mo ahorrar energÃ­a?",
            "options": ["A) Usar LED", "B) Luces prendidas", "C) Gasolina", "D) Comprar ropa nueva"],
            "answer": "A"
        }
    ]
    q = random.choice(questions)
    await ctx.send(f"ğŸ“š {q['q']}\n" + "\n".join(q['options']))

    def check(m):
        return m.author == ctx.author and m.channel == ctx.channel

    try:
        response = await bot.wait_for("message", timeout=20.0, check=check)
        if response.content.upper() == q["answer"]:
            await ctx.send("âœ… Â¡Correcto!")
        else:
            await ctx.send(f"âŒ Incorrecto. La respuesta correcta era: **{q['answer']}**")
    except:
        await ctx.send("â±ï¸ Tiempo agotado. Intenta de nuevo.")

@bot.command()
async def ayuda (ctx):
    await ctx.send(
        "**ğŸ“˜ Comandos disponibles:**\n"
        "/start - PresentaciÃ³n del bot\n"
        "/tip - Consejo ecolÃ³gico\n"
        "/causes - Causas de contaminaciÃ³n\n"
        "/facts - Dato curioso\n"
        "/recycle [material] - Consejo para reciclar\n"
        "/actions - AcciÃ³n ecolÃ³gica\n"
        "/quiz - Pregunta de opciÃ³n mÃºltiple\n"
        "/help - Muestra esta ayuda"
    )

bot.run("")
